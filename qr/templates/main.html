{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link href="{% static "css/main.css" %}" rel="stylesheet">
</head>
  <form id="form" method="post">
    <div class="dropdown position-fixed bottom-0 end-0 mb-3 me-3 bd-mode-toggle">
      <button type="submit" class="btn btn-primary hidden" id="download">Скачать QR</button>
    </div>

    <div class="d-flex flex-column flex-md-row p-4 gap-4 py-md-5 align-items-center justify-content-center">
          <div class="list-group col-12">
              {% for item in boxesinfo %}
                    <div>
                      
                        {% csrf_token %}
                        <a href="{{ item.get_absolute_url }}" class="list-group-item list-group-item-action d-flex gap-3 py-3 mb-2 z-0" aria-current="true">
                          <div>
                            <input class="form-check-input" type="checkbox" id="checkboxNoLabel{{ forloop.counter }}" name="check" value="{{ item.img }}" aria-label="..." style="width: 30px; height: 30px;">
                          </div>
                          <img src="https://github.com/twbs.png" alt="twbs" width="32" height="32" class="rounded-circle flex-shrink-0">
                          <div class="d-flex gap-2 w-100 justify-content-between">
                            <div>
                              <h6 class="mb-0">{{ item.title }}</h6>
                              <p class="mb-0 opacity-75">{{ item.content }}</p>
                            </div>
                            <small class="opacity-50 text-nowrap">{{ item.publish }}</small>
                            
                          </div>

                        </a>
                        <p class="d-inline-flex gap-1 z-3">
                                <button class="btn btn-primary" type="button" data-bs-toggle="collapse" data-bs-target="#collapseExample{{ forloop.counter }}" aria-expanded="false" aria-controls="collapseExample">
                                    Распечатать QR
                                </button>
                        </p>
                        <div>

      
                      </form>
                        

                    <div class="collapse" id="collapseExample{{ forloop.counter }}">
                      <div class="card card-body ">
                        {% if qr_image %}
                        <div id="print-content">
                            <form>
                                <img src="media/{{ item.img }}" class="qr-code" style="width: 300px;">

                            </form>
                        </div>
                          <input type="button" class="btn btn-primary qr-button " onclick="printDiv('print-content')" value="Распечатать"/>
                    {% endif %}
                      </div>
                    </div>


              {% empty %}
                    <p>There are no comments.</p>
              {% endfor %}






          </div>
    </div>
  </form>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script type="text/javascript">
    function printDiv(divName) {
        var printContents = document.getElementById(divName).innerHTML;
        w=window.open();
        w.document.write(printContents);
        w.print();
        w.close();

    }
</script>
<script>
    $('#form input:checkbox').change(function () {
    $('#download').toggle($('#form input:checkbox:checked').length>0);
    });

</script>
</body>
</html>